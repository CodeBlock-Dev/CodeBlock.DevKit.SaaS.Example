@using HeyItIsMe.Application.Dtos.Pages
<div class="table-responsive text-nowrap">
    <table class="table table-hover mt-3">
        <thead>
            <tr class="f-sm">
                <th scope="col"></th>
                <th scope="col">@CoreLocalizer[CoreResource.Row_Number]</th>
                <th scope="col">@SharedLocalizer[SharedResource.Page_Route]</th>
                <th scope="col">@SharedLocalizer[SharedResource.Page_DisplayName]</th>
                <th scope="col">@CoreLocalizer[CoreResource.CreateDateTime]</th>
            </tr>
        </thead>
        <tbody>
            @if (Model == null || !Model.Any())
            {
                <tr>
                    <td colspan="6" class="text-center text-muted py-5">
                        @CoreLocalizer[CoreResource.No_Items_Found]
                    </td>
                </tr>
            }
            else
            {
                int row = 0;
                foreach (var item in Model)
                {
                    <tr class="f-sm cursor-pointer" @onclick="@(()=>ShowDetailsModal(item.Id))">
                        <td> <span><i class="bi bi-box-arrow-right text-primary"></i></span></td>
                        <td>@(++row)</td>
                        <td>@item.Route</td>
                        <td>@item.DisplayName</td>
                        <td class="f-xs">@item.CreationTime.FullDateLongTime</td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

@code {
    [Parameter]
    public IEnumerable<GetPageDto> Model { get; set; }

    protected virtual void ShowDetailsModal(string id)
    {
        var parameters = new ModalParameters();
        parameters.Add(nameof(PageDetails.PageId), id);
        ModalService.Show<PageDetails>(AdminPanelLocalizer[AdminPanelResource.PageDetails], parameters, new ModalOptions { Class = "blazored-modal width-xs-95 width-md-80" });
    }
}
